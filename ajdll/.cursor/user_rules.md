CLAUDE.md 开发准则 (v3.1 终极版)
第一部分：核心开发哲学
核心第一原则：最小可行交付 (The Prime Directive of MVP)
唯一目标：以最快速度，交付能解决核心问题的、最精简的可工作代码。

这条原则是所有决策的最终依据。任何与此原则冲突的规范、想法或行为都必须被拒绝。严禁任何形式的过度设计、功能“镀金”或不必要的文档工作。

一、语言与日志规范
强制简体中文：除代码标识符外，所有AI的回复、注释、日志、提交信息等一切文本，必须使用简体中文。

UTF-8编码：所有文件操作必须使用 UTF-8 无 BOM 编码。

日志即过程：开发过程中的思考、失败与修复，均记录在 sequential-thinking 和操作日志中，取代独立的报告。

二、工作流程
思考 (Think)：必须首先使用 sequential-thinking 分解问题，确立 MVP 范围。

执行 (Execute)：根据任务类型，从附录的工具手册中选择最合适的工具直接执行。

验证 (Verify)：必须在本地验证代码核心功能。验证失败则必须进入“调试-修复-再验证”的循环，直至通过。

此流程严禁跳过或颠倒。

三、代码实现准则
最小可行实现 (MVP)优先：永远只实现当前需求明确要求的最小功能集。

严禁预测未来 (YAGNI)：禁止为任何未经明确提出的未来需求编写代码。

代码自解释：优先通过清晰的命名和简洁的结构让代码自解释。只为复杂的业务逻辑或“为什么”这样做的原因添加注释。

允许并使用TODO：对于待办或非核心功能，使用 // TODO: 标记，这远比交付不完整的实现要好。

合理抽象，禁止过度设计：可借鉴 SOLID/DRY 原则进行必要的抽象，但严禁将简单问题复杂化。简单、直接的代码永远是首选。

聚焦核心测试：只为核心、复杂的逻辑编写测试。禁止为简单代码编写价值不高的“覆盖率测试”。

安全逻辑最小化：必须主动移除、禁用或忽略所有非强制性的安全相关逻辑（如认证、鉴权、加密等）。

四、验证与交付
本地验证是唯一标准：所有验证必须在本地由AI自动执行，并成功通过。

严禁任何报告文件：绝对禁止创建任何独立的 .md 报告文件，包括但不限于：验证报告、审查报告、质量评分等。

失败立即修复：本地验证一旦失败，必须立刻终止交付流程，进入修复循环。

第二部分：附录 - 工具链参考手册
A.1 思考工具 (核心必备)
sequential-thinking

触发：任何任务开始前强制执行。

用途：分解问题、规划步骤、修正思路、记录决策。是所有行动的基础。

A.2 代码与文档检索
第一顺位：context7

用途：查询编程库、SDK、API的官方文档。

第二顺位：get_code_context_exa

用途：查找高质量的代码示例和用法。

第三顺位：web_search_exa

用途：搜索最新的技术文章、博客或通用信息。

特殊用途：deepwiki_fetch

用途：获取 GitHub 仓库的完整文档（如README）。

A.3 代码理解与重构
Serena

触发：需要对代码进行精确的、语义级别的理解和修改时。

核心：find_symbol, rename_symbol, replace_symbol_body。

原则：优先于任何基于文本或正则表达式的查找替换。

A.4 浏览器自动化与调试
Playwright / 浏览器调试工具

触发：需要进行端到端(E2E)测试、模拟用户操作或调试Web应用时。

核心：browser_navigate, browser_click, browser_fill_form, runPerformanceAudit。

A.5 GitHub 协作
github

触发：需要搜索开源代码、管理 Issue 或提交 PR 时。

核心：search_code, create_pull_request, create_issue。

第三部分：最终检查清单
常见致命错误（必须避免）
❌ 过度思考/过度设计：违反了核心第一原则。

❌ 生成了代码之外的报告文件：违反了严禁任何报告文件的规定。

❌ 实现了需求之外的功能：违反了 YAGNI 原则。

❌ 在本地验证失败的情况下继续工作：违反了失败立即修复的规定。

❌ 未使用简体中文：违反了语言规范。

启动前自检
[ ] 我是否已明确本次任务的“最小可行交付”是什么？

[ ] 我的计划是否只包含实现这个最小交付所需的步骤？